function aggiungiDataOra() {
    const now = new Date().toLocaleString("it-IT", { timeZone: "Europe/Rome" });

    fetch("https://api.ipify.org?format=json")
        .then(response => response.json())
        .then(data => {
            const ip = data.ip;
            const url = "https://script.google.com/macros/s/AKfycbyXbYy7s1as7cBZQ4cxmCzIA9UHbSPqWbYKvJCcLulOTRaYboqiHEDP24eiHK_N1-gHlA/exec";

            const params = new URLSearchParams({ ip: ip, data: now });

            fetch(url + "?" + params.toString(), { method: "GET" })
                .then(() => console.log("Dati inviati con successo!"))
                .catch(error => {
                    console.error("Errore invio dati:", error);
                    document.getElementById('debug').innerHTML = `Errore nel recupero dei dati: ${error.message}`;
                });
        })
        .catch(error => {
            console.error("Errore nel recupero dell'IP:", error);
            document.getElementById('debug').innerHTML = `Errore nel recupero dell'IP: ${error.message}`;
        });
}
